@page
@model Zealand_Booking_System.Pages.RoomModel
@{
}

<body>
    @foreach (var room in Model.Room)
    {
        <div class="card" style="padding: 15px; margin-bottom: 20px;">
            <div class="card-body">

                @if (Model.EditRoomID == room.RoomID)
                {
                    <!-- REDIGERINGSTILSTAND -->
                    <form method="post" asp-page-handler="SaveEdit">
                        @Html.AntiForgeryToken()
                        <input type="hidden" name="roomID" value="@room.RoomID" />

                        <label>Lokalenavn:</label>
                        <input asp-for="EditRoom.RoomName" class="form-control" />

                        <label>Lokation:</label>
                        <input asp-for="EditRoom.RoomLocation" class="form-control" />

                        <label>Størrelse:</label>
                        <input asp-for="EditRoom.Size" class="form-control" type="number" />

                        <label>Beskrivelse:</label>
                        <textarea asp-for="EditRoom.RoomDescription" class="form-control"></textarea>

                        <button type="submit" class="btn btn-success mt-2">Gem</button>
                        <a href="/Room" class="btn btn-secondary mt-2">Fortryd</a>
                    </form>
                }
                else
                {
                    <!-- VISNINGSTILSTAND -->
                    <h5 class="card-title">@room.RoomName</h5>
                    <p>
                        Størrelse: @room.Size <br />
                        Lokation: @room.RoomLocation <br />
                        @room.RoomDescription
                    </p>

                    <!-- Delete -->
                    <form method="post" asp-page-handler="Delete" style="display:inline;">
                        @Html.AntiForgeryToken()
                        <input type="hidden" name="roomID" value="@room.RoomID" />
                        <button type="submit" class="btn btn-danger btn-sm">Slet</button>
                    </form>

                    <!-- StartEdit -->
                    <form method="post" asp-page-handler="StartEdit" style="display:inline;">
                        @Html.AntiForgeryToken()
                        <input type="hidden" name="roomID" value="@room.RoomID" />
                        <button type="submit" class="btn btn-warning btn-sm">Rediger</button>
                    </form>

                    <!-- Book knap -->
                    <a asp-page="/CreateBooking" class="btn btn-success btn-sm">Book lokalet</a>
                }
            </div>
        </div>
    }

    <!-- FORMULAR TIL AT OPRETTE NYT LOKALE -->
    <h3>Opret nyt lokale</h3>
    <form method="post" style="width:50%; margin-bottom: 30px;">
        @Html.AntiForgeryToken()
        <div class="mb-2">
            <label for="RoomName">Lokalenavn:</label><br />
            <input asp-for="NewRoom.RoomName" id="RoomName" required class="form-control" />
        </div>

        <div class="mb-2">
            <label for="RoomLocation">Lokation:</label><br />
            <input asp-for="NewRoom.RoomLocation" id="RoomLocation" required class="form-control" />
        </div>

        <div class="mb-2">
            <label for="Size">Størrelse:</label><br />
            <input asp-for="NewRoom.Size" id="Size" type="number" required class="form-control" />
        </div>

        <div class="mb-2">
            <label for="RoomDescription">Beskrivelse:</label><br />
            <textarea asp-for="NewRoom.RoomDescription" id="RoomDescription" class="form-control"></textarea>
        </div>

        <button type="submit" class="btn btn-primary mt-2">Opret lokale</button>
    </form>
</body>